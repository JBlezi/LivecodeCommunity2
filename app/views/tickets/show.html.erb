<div class="container-sm profile-container">
  <div class="profile-title"><h1><%= @ticket.title %></h1></div>
    <ul class="show-ticket-list">
      <li><strong>Language: </strong><%= @ticket.language %></li>
      <li><p><strong>User: </strong><%= @ticket.user.user_information.first_name %> <%= @ticket.user.user_information.last_name %></p></li>
      <li><strong>Email: </strong><%= @ticket.user.email %></li>
      <li><strong>Status: </strong><%= @ticket.status %></li>
      <br>
      <li><strong>Description:</strong></li>
      <div><p><%= @ticket.content %></p></div>
    </ul>
      <% if current_user != @ticket.user %>
        <%= button_to "Accept this ticket", chats_path(ticket_id: @ticket.id), class:"btn outline-button m-1", method: :post %>
      <% end %>
      <br>
      <% if @chat && @chat.ticket.user %>
        <%= link_to "Enter chat", chat_path(@chat), class: "btn standart-button" %>
      <% end %>
      <%= link_to "Show all tickets", tickets_path, class:"btn outline-button m-1", style:"float: right;" %>
      <%= button_to "Destroy this ticket", @ticket, class:"btn outline-button m-1", style:"float: right;", method: :delete if policy(@ticket).destroy?%>
     
      <% if policy(@ticket).edit? %>
       <div style="float: left;">
        <%= render 'modal', ticket: @ticket %>
        <a style="float: right;" class="btn outline-button" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Edit</i></a>
       </div>
      <% else %>
        <%= link_to "Seeker profile", user_information_path(@ticket.user_id), class:"btn outline-button m-1", style:"float: right;" %>
      <% end %>

      <!-- Button trigger modal -->
      <% if current_user == @ticket.user %>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
          Add Review
        </button>
      <% end %>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
            <%= simple_form_for [@ticket, @review] do |f| %>
              <%= f.input :comment %>
              <%= f.input :score, collection: (1..5).to_a, label: "Rate your experience" %>
              <%= f.submit %>
            <% end %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>




<% if current_user == @ticket.user %>
  <%= render 'status-modal', ticket: @ticket %>
<% end %>
